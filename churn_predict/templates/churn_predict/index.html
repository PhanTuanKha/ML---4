{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Churn Risk Prediction - Financial Services</title>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- Google Fonts: Be Vietnam Pro -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Các biến JavaScript này sử dụng Django Static Tag để lấy đường dẫn chính xác
        const STATIC_PATHS = {
            login: "{% static 'images/Homepage.png' %}",
            signup: "{% static 'images/sign_up.png' %}",
            forgot: "{% static 'images/forgetpw.png' %}",
            setPassword: "{% static 'images/set-password.png' %}",
            success: "{% static 'images/success.png' %}"
        };
    </script>
    <style>
        /* --- GLOBAL STYLES & VARIABLES --- */
        :root {
            --primary-blue: #4A69FF;
            --dark-text: #1A202C;
            --light-text: #5A6372;
            --background-light: #F7FAFC;
            --white: #FFFFFF;
            --border-color: #E2E8F0;
            --footer-bg: #0F172A;
            --success-green: #28a745;
            --error-red: #e53e3e;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Be Vietnam Pro', sans-serif; line-height: 1.6; color: var(--dark-text); background-color: var(--white); }
        .container { max-width: 1140px; margin: 0 auto; padding: 0 20px; }
        section { padding: 80px 0; }
        h1, h2, h3 { font-weight: 700; line-height: 1.3; }
        h2 { font-size: 36px; text-align: center; margin-bottom: 50px; }
        p { color: var(--light-text); }

        /* --- HEADER & NAVIGATION --- */
        .main-header { position: fixed; top: 0; left: 0; width: 100%; background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); z-index: 1000; border-bottom: 1px solid var(--border-color); }
        .main-nav { display: flex; justify-content: space-between; align-items: center; height: 80px; }
        .logo { display: flex; align-items: center; text-decoration: none; }
        .logo svg { width: 40px; height: 40px; color: var(--primary-blue); }
        .nav-buttons button { cursor: pointer; background: none; border: none; font-family: 'Be Vietnam Pro', sans-serif; text-decoration: none; padding: 10px 22px; border-radius: 8px; font-weight: 500; font-size: 15px; transition: all 0.3s ease; margin-left: 10px; }
        .nav-buttons .btn-login { background-color: var(--white); color: var(--primary-blue); border: 1px solid var(--border-color); }
        .nav-buttons .btn-login:hover { background-color: #f0f3ff; }
        .nav-buttons .btn-register { background-color: var(--primary-blue); color: var(--white); border: 1px solid var(--primary-blue); }
        .nav-buttons .btn-register:hover { opacity: 0.9; }

        /* --- HERO SECTION (UPDATED) --- */
        .hero { 
            padding-top: 80px;
            padding-bottom: 80px;
            height: 90vh;
            min-height: 600px;
            display: flex;
            align-items: center;
            position: relative; 
            overflow: hidden; 
            background-color: var(--primary-blue);
        }
        .hero-content { 
            display: flex; 
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 2;
            width: 100%;
        }
        .hero-text { 
            text-align: center;
            max-width: 850px;
        }
        .hero-text h1 { 
            font-size: 64px;
            color: var(--white); 
            margin-bottom: 25px; 
            text-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .hero-text h1 .highlight { 
            color: var(--white);
            display: block;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.6), 0 0 25px rgba(255, 255, 255, 0.4);
        }
        .hero-text .subtitle { 
            font-size: 20px;
            font-style: italic; /* Italicize subtitle */
            max-width: 600px; 
            margin: 0 auto;
            color: #e2e8f0; 
        }
        
        /* --- BUBBLE ANIMATION STYLES (LONG DURATION & HIGH DENSITY) --- */
        .bubbles-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 1; }
        .bubbles-bg span {
            position: absolute;
            bottom: -300px; /* Start even lower */
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.25);
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }
        .bubbles-bg span::before {
            content: '';
            position: absolute;
            top: 10%; left: 10%; width: 50%; height: 50%;
            border-radius: 50%;
            background: radial-gradient(circle, white, rgba(255, 255, 255, 0) 70%);
            transform: rotate(45deg);
            opacity: 0.8;
        }
        @keyframes floatUp1 { 100% { transform: translateY(-150vh) rotate(600deg); opacity: 0; } }
        @keyframes floatUp2 { 100% { transform: translate(150px, -150vh) rotate(450deg); opacity: 0; } }
        @keyframes floatUp3 { 100% { transform: translate(-200px, -150vh) rotate(550deg); opacity: 0; } }
        @keyframes floatUp4 {
            50% { transform: translate(80px, -75vh) rotate(300deg); }
            100% { transform: translate(-100px, -150vh) rotate(720deg); opacity: 0; }
        }
        /* More bubbles with longer durations and wide-ranging negative delays */
        .bubbles-bg span:nth-child(1) { width: 80px; height: 80px; left: 10%; animation: floatUp2 42s -5s; }
        .bubbles-bg span:nth-child(2) { width: 40px; height: 40px; left: 20%; animation: floatUp3 28s 3s; }
        .bubbles-bg span:nth-child(3) { width: 120px; height: 120px; left: 30%; animation: floatUp4 58s -10s; }
        .bubbles-bg span:nth-child(4) { width: 60px; height: 60px; left: 45%; animation: floatUp1 36s 5s; }
        .bubbles-bg span:nth-child(5) { width: 90px; height: 90px; left: 60%; animation: floatUp3 45s -2s; }
        .bubbles-bg span:nth-child(6) { width: 50px; height: 50px; left: 75%; animation: floatUp2 29s 7s; }
        .bubbles-bg span:nth-child(7) { width: 150px; height: 150px; left: 85%; animation: floatUp4 65s -15s; }
        .bubbles-bg span:nth-child(8) { width: 70px; height: 70px; left: 5%; animation: floatUp1 25s 6s; }
        .bubbles-bg span:nth-child(9) { width: 100px; height: 100px; left: 50%; animation: floatUp2 43s -8s; }
        .bubbles-bg span:nth-child(10) { width: 45px; height: 45px; left: 90%; animation: floatUp3 30s 0s; }
        .bubbles-bg span:nth-child(11) { width: 180px; height: 180px; left: 15%; animation: floatUp3 70s -12s; }
        .bubbles-bg span:nth-child(12) { width: 35px; height: 35px; left: 80%; animation: floatUp1 25s 2s; }
        .bubbles-bg span:nth-child(13) { width: 100px; height: 100px; left: 95%; animation: floatUp4 42s -3s; }
        .bubbles-bg span:nth-child(14) { width: 220px; height: 220px; left: 55%; animation: floatUp2 100s -25s; }
        .bubbles-bg span:nth-child(15) { width: 25px; height: 25px; left: 25%; animation: floatUp3 22s 5s; }
        .bubbles-bg span:nth-child(16) { width: 75px; height: 75px; left: 35%; animation: floatUp1 45s -6s; }
        .bubbles-bg span:nth-child(17) { width: 130px; height: 130px; left: 2%; animation: floatUp2 63s 1s; }
        .bubbles-bg span:nth-child(18) { width: 65px; height: 65px; left: 88%; animation: floatUp4 38s -9s; }
        .bubbles-bg span:nth-child(19) { width: 95px; height: 95px; left: 68%; animation: floatUp1 47s 2s; }
        .bubbles-bg span:nth-child(20) { width: 160px; height: 160px; left: 40%; animation: floatUp3 88s -20s; }
        .bubbles-bg span:nth-child(21) { width: 55px; height: 55px; left: 12%; animation: floatUp1 33s -4s; }
        .bubbles-bg span:nth-child(22) { width: 85px; height: 85px; left: 28%; animation: floatUp2 48s 8s; }
        .bubbles-bg span:nth-child(23) { width: 140px; height: 140px; left: 48%; animation: floatUp3 78s -30s; }
        .bubbles-bg span:nth-child(24) { width: 30px; height: 30px; left: 62%; animation: floatUp4 20s 1s; }
        .bubbles-bg span:nth-child(25) { width: 110px; height: 110px; left: 78%; animation: floatUp1 55s -11s; }
        .bubbles-bg span:nth-child(26) { width: 200px; height: 200px; left: 92%; animation: floatUp2 120s -40s; }
        .bubbles-bg span:nth-child(27) { width: 60px; height: 60px; left: 8%; animation: floatUp3 31s 4s; }
        .bubbles-bg span:nth-child(28) { width: 90px; height: 90px; left: 22%; animation: floatUp4 41s -14s; }
        .bubbles-bg span:nth-child(29) { width: 150px; height: 150px; left: 42%; animation: floatUp1 82s -35s; }
        .bubbles-bg span:nth-child(30) { width: 40px; height: 40px; left: 58%; animation: floatUp2 26s 9s; }
        .bubbles-bg span:nth-child(31) { width: 70px; height: 70px; left: 72%; animation: floatUp3 39s -1s; }
        .bubbles-bg span:nth-child(32) { width: 190px; height: 190px; left: 82%; animation: floatUp4 95s -22s; }
        .bubbles-bg span:nth-child(33) { width: 45px; height: 45px; left: 3%; animation: floatUp1 23s 11s; }
        .bubbles-bg span:nth-child(34) { width: 105px; height: 105px; left: 18%; animation: floatUp2 52s -16s; }
        .bubbles-bg span:nth-child(35) { width: 240px; height: 240px; left: 38%; animation: floatUp3 115s -50s; }
        .bubbles-bg span:nth-child(36) { width: 50px; height: 50px; left: 65%; animation: floatUp4 28s 3s; }
        .bubbles-bg span:nth-child(37) { width: 80px; height: 80px; left: 77%; animation: floatUp1 44s -7s; }
        .bubbles-bg span:nth-child(38) { width: 125px; height: 125px; left: 98%; animation: floatUp2 68s -33s; }
        .bubbles-bg span:nth-child(39) { width: 30px; height: 30px; left: 33%; animation: floatUp3 21s 6s; }
        .bubbles-bg span:nth-child(40) { width: 170px; height: 170px; left: 52%; animation: floatUp4 90s -45s; }


        /* --- FEATURES SECTION --- */
        .features { background-color: var(--background-light); }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .feature-card { background-color: var(--white); padding: 30px; border-radius: 12px; border: 1px solid var(--border-color); text-align: center; transition: all 0.3s ease; }
        .feature-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .feature-card .icon { display: inline-flex; width: 60px; height: 60px; border-radius: 50%; background-color: #EBF0FF; color: var(--primary-blue); align-items: center; justify-content: center; margin-bottom: 20px; }
        .feature-card .icon svg { width: 28px; height: 28px; }
        .feature-card h3 { font-size: 20px; margin-bottom: 10px; }

        /* --- HOW IT WORKS SECTION --- */
        .how-it-works .steps-container { display: flex; justify-content: space-between; gap: 40px; position: relative; }
        .step { flex: 1; text-align: center; padding: 20px; }
        .step .step-number { width: 50px; height: 50px; border-radius: 50%; background-color: var(--primary-blue); color: var(--white); display: inline-flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; margin-bottom: 20px; border: 4px solid #EBF0FF; }
        .step h3 { font-size: 22px; margin-bottom: 10px; }
        
        /* --- TESTIMONIALS SECTION --- */
        .testimonials { background-color: var(--background-light); }
        .testimonial-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .testimonial-card { background-color: var(--white); padding: 30px; border-radius: 12px; border: 1px solid var(--border-color); }
        .testimonial-card blockquote { font-style: italic; border-left: 3px solid var(--primary-blue); padding-left: 20px; margin-bottom: 20px; }
        .author { display: flex; align-items: center; }
        .author img { width: 50px; height: 50px; border-radius: 50%; margin-right: 15px; }
        .author-info .name { font-weight: 700; color: var(--dark-text); }
        .author-info .title { font-size: 14px; }
        
        /* --- CTA SECTION --- */
        .cta-section-wrapper { padding: 40px 0; }
        .cta-section { background-color: var(--primary-blue); color: var(--white); text-align: center; padding: 60px 0; border-radius: 12px; margin: 0 20px; }
        .cta-section h2 { color: var(--white); font-size: 32px; margin-bottom: 25px; }
        .cta-section .btn { background-color: var(--white); color: var(--primary-blue); padding: 14px 35px; border-radius: 8px; font-weight: 700; text-decoration: none; transition: all 0.3s ease; }
        .cta-section .btn:hover { background-color: #f0f3ff; transform: scale(1.05); }

        /* --- FOOTER --- */
        .main-footer { background-color: var(--footer-bg); color: #CBD5E1; padding: 60px 0 20px; }
        .footer-content { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap: 40px; margin-bottom: 40px; }
        .footer-column h4 { color: var(--white); margin-bottom: 15px; font-size: 18px; }
        .footer-column p { color: #94A3B8; }
        .footer-column ul { list-style: none; }
        .footer-column ul li { margin-bottom: 10px; }
        .footer-column ul a { text-decoration: none; color: #94A3B8; transition: color 0.3s ease; }
        .footer-column ul a:hover { color: var(--white); }
        .footer-bottom { text-align: center; padding-top: 20px; border-top: 1px solid #334155; font-size: 14px; }

        /* --- AUTHENTICATION POPUP STYLES --- */
        .auth-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
        .auth-overlay.active { opacity: 1; visibility: visible; }
        .auth-container { display: flex; width: 960px; max-width: 90%; height: auto; max-height: 90vh; background-color: var(--white); border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); overflow: hidden; transform: scale(0.95); transition: transform 0.3s ease; }
        .auth-overlay.active .auth-container { transform: scale(1); }
        .auth-form-panel { flex: 1.1; padding: 40px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        .form-content { width: 100%; max-width: 380px; margin: 0 auto; }
        .auth-form-panel .logo { margin-bottom: 24px; }
        .auth-form-panel .auth-title { font-size: 32px; font-weight: 700; color: var(--dark-text); margin-bottom: 8px; }
        .auth-form-panel .subtitle { color: var(--light-text); font-size: 15px; margin-bottom: 32px; }
        .input-group { margin-bottom: 20px; }
        .input-group input { width: 100%; border: 1px solid var(--border-color); border-radius: 8px; padding: 14px; font-size: 16px; font-family: 'Be Vietnam Pro', sans-serif; transition: all 0.3s; }
        .input-group input::placeholder { color: #A0AEC0; }
        .input-group input:focus { outline: none; border-color: var(--primary-blue); box-shadow: 0 0 0 3px rgba(74, 105, 255, 0.2); }
        .password-wrapper { position: relative; }
        .password-toggle { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); cursor: pointer; color: var(--light-text); }
        .auth-form .options { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; font-size: 14px; }
        .auth-form a, .back-link { color: var(--primary-blue); text-decoration: none; font-weight: 500; }
        .auth-form a:hover, .back-link:hover { text-decoration: underline; }
        .back-link { display: inline-flex; align-items: center; margin-bottom: 24px; }
        .back-link i { margin-right: 8px; }
        .checkbox-group { display: flex; align-items: center; color: var(--light-text); }
        .checkbox-group input { margin-right: 8px; }
        .btn-submit { width: 100%; padding: 15px; background: var(--primary-blue); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .btn-submit:hover:not(:disabled) { opacity: 0.9; }
        .btn-submit:disabled { background-color: #aeb8ff; cursor: not-allowed; }
        .auth-switch { text-align: center; margin-top: 24px; font-size: 15px; }
        .auth-switch a { font-weight: 600; }
        .hidden { display: none !important; }

        /* --- NEW: AUTH FEEDBACK STYLES --- */
        .success-message { text-align: center; }
        .success-icon { font-size: 64px; color: var(--success-green); margin-bottom: 20px; }
        .password-mismatch-error { color: var(--error-red); font-size: 13px; margin-top: 5px; display: none; }

        /* --- ILLUSTRATION PANEL (RIGHT) --- */
        .auth-illustration-panel { flex: 1; display: flex; justify-content: center; align-items: center; padding: 40px; background-color: #EBF0FF; }
        .auth-illustration-panel img { max-width: 100%; height: auto; }
        
        /* --- RESPONSIVE STYLES --- */
        @media (max-width: 1400px) {
            .hero-text h1 {
                font-size: 56px;
            }
        }
        @media (max-width: 992px) {
            .auth-illustration-panel { display: none; }
            .auth-container { width: 500px; height: auto; }
            .hero-text h1 { font-size: 52px; }
            .hero-text .subtitle { font-size: 18px; }
            .footer-content { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 768px) {
            .footer-content { grid-template-columns: 1fr; text-align: center;}
            .how-it-works .steps-container { flex-direction: column; }
            .hero-text h1 { font-size: 42px; }
        }
        @media (max-width: 540px) {
            .auth-container { width: 100%; height: 100%; max-height: 100vh; border-radius: 0; }
            .auth-form-panel { padding: 30px; justify-content: flex-start; padding-top: 60px; }
        }
    </style>
</head>
<body>

    <!-- ======================= HEADER ======================= -->
    <header class="main-header">
        <nav class="container main-nav">
            <a href="#" class="logo">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M16.8839 12.0002C16.8839 14.6934 14.6932 16.8842 11.9999 16.8842C9.30669 16.8842 7.11597 14.6934 7.11597 12.0002C7.11597 9.30691 9.30669 7.11618 11.9999 7.11618C14.6932 7.11618 16.8839 9.30691 16.8839 12.0002Z" stroke="currentColor" stroke-width="1.5"></path> <path d="M19.3499 7.11618C21.0503 8.3551 22.1158 10.2646 22.1158 12.4211C22.1158 16.223 18.991 19.348 15.1892 19.348C13.2842 19.348 11.5519 18.6631 10.2335 17.5615" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M13.7665 6.43859C12.448 5.33686 10.7158 4.65201 8.81079 4.65201C4.9961 4.65201 1.88391 7.7642 1.88391 11.5789C1.88391 13.7354 2.94951 15.6449 4.65014 16.8838" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            </a>
            <div class="nav-buttons">
                <button class="btn-login" id="show-login-btn">Login</button>
                <button class="btn-register" id="show-signup-btn">Sign Up</button>
            </div>
        </nav>
    </header>

    <!-- ======================= HOMEPAGE CONTENT ======================= -->
    <main>
        <section class="hero">
            <div class="bubbles-bg">
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
            </div>
            <div class="container hero-content">
                <div class="hero-text">
                    <h1>Predict <span class="highlight">Customer Churn</span> in Financial Services</h1>
                    <p class="subtitle">Analyze customer behavior, detect early churn signals, and take data-driven actions to improve loyalty and customer retention.</p>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <h2>Why Choose Us?</h2>
                <div class="features-grid">
                    <div class="feature-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg></div><h3>Accurate Predictions</h3><p>Utilize advanced Machine Learning algorithms to deliver highly accurate forecasts.</p></div>
                    <div class="feature-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 100 15 7.5 7.5 0 000-15zM21 21l-5.197-5.197" /></svg></div><h3>In-depth Analysis</h3><p>Understand the core factors leading to customer churn through detailed reports.</p></div>
                    <div class="feature-card"><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" /></svg></div><h3>Intuitive Interface</h3><p>A modern dashboard provides a comprehensive overview, helping you quickly grasp the situation.</p></div>
                </div>
            </div>
        </section>
        
        <section class="testimonials">
            <div class="container">
                <h2>What Our Customers Say</h2>
                <div class="testimonial-grid">
                    <div class="testimonial-card">
                        <blockquote>"This tool has changed how we approach customer retention. Our churn rate dropped by 15% in just one quarter."</blockquote>
                        <div class="author">
                            <img src="https://i.pravatar.cc/150?img=1" alt="Author 1">
                            <div class="author-info"><p class="name">An Nguyen</p><p class="title">Head of Analytics, ABC Bank</p></div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <blockquote>"The interface is very user-friendly. We were able to accurately identify customers who needed special attention."</blockquote>
                        <div class="author">
                            <img src="https://i.pravatar.cc/150?img=2" alt="Author 2">
                            <div class="author-info"><p class="name">Bich Hanh Tran</p><p class="title">COO, XYZ Finance</p></div>
                        </div>
                    </div>
                    <div class="testimonial-card">
                        <blockquote>"The integration was incredibly fast. The support team helped us deploy the system in just a few days. Very impressive!"</blockquote>
                        <div class="author">
                            <img src="https://i.pravatar.cc/150?img=3" alt="Author 3">
                            <div class="author-info"><p class="name">Minh Tuan Le</p><p class="title">CTO, Capital Investment Fund</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta-section-wrapper">
             <div class="container">
                <div class="cta-section">
                    <h2>Ready to optimize your customer retention rate?</h2>
                    <a href="#" class="btn">Get Started for Free</a>
                </div>
            </div>
        </section>
    </main>

    <!-- ======================= FOOTER ======================= -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column"><h4>About Us</h4><p>We provide intelligent data analysis solutions to help financial institutions predict and mitigate customer churn risk.</p></div>
                <div class="footer-column"><h4>Product</h4><ul><li><a href="#">Features</a></li><li><a href="#">Pricing</a></li><li><a href="#">Demo</a></li></ul></div>
                <div class="footer-column"><h4>Resources</h4><ul><li><a href="#">Blog</a></li><li><a href="#">Documentation</a></li><li><a href="#">Support</a></li></ul></div>
                <div class="footer-column"><h4>Company</h4><ul><li><a href="https://web.facebook.com/PTKha147/">About Us</a></li><li><a href="#">Contact</a></li><li><a href="#">Terms</a></li></ul></div>
            </div>
            <div class="footer-bottom"><p>&copy; 2025 Nhóm 4 ML K234161836. All rights reserved.</p></div>
        </div>
    </footer>

    <!-- ======================= AUTHENTICATION POPUP ======================= -->
    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-container">
            <div class="auth-form-panel">
                
                <!-- LOGIN FORM -->
                <div id="login-form">
                    <div class="form-content">
                        <div class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.8839 12.0002C16.8839 14.6934 14.6932 16.8842 11.9999 16.8842C9.30669 16.8842 7.11597 14.6934 7.11597 12.0002C7.11597 9.30691 9.30669 7.11618 11.9999 7.11618C14.6932 7.11618 16.8839 9.30691 16.8839 12.0002Z" stroke="currentColor" stroke-width="1.5"></path> <path d="M19.3499 7.11618C21.0503 8.3551 22.1158 10.2646 22.1158 12.4211C22.1158 16.223 18.991 19.348 15.1892 19.348C13.2842 19.348 11.5519 18.6631 10.2335 17.5615" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path> <path d="M13.7665 6.43859C12.448 5.33686 10.7158 4.65201 8.81079 4.65201C4.9961 4.65201 1.88391 7.7642 1.88391 11.5789C1.88391 13.7354 2.94951 15.6449 4.65014 16.8838" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></div>
                        <h2 class="auth-title">Login</h2>
                        <p class="subtitle">Welcome back! Please log in.</p>
                        <!-- ===== START: FORM MODIFICATION ===== -->
                        <form class="auth-form" id="login-auth-form" action="dashboard.html">
                            {% csrf_token %}
                        <!-- ===== END: FORM MODIFICATION ===== -->
                            <div class="input-group"><input type="email" id="login-email" required placeholder="Email"></div>
                            <div class="input-group"><div class="password-wrapper"><input type="password" id="login-password" required placeholder="Password"><span class="password-toggle"><i class="fa-regular fa-eye-slash"></i></span></div></div>
                            <div class="options"><div class="checkbox-group"><input type="checkbox"> Remember me</div><a href="#" id="show-forgot-password-link">Forgot password?</a></div>
                            <button type="submit" class="btn-submit" id="login-btn" disabled>Login</button>
                        </form>
                        <p class="auth-switch">Don't have an account? <a href="#" id="switch-to-signup">Sign Up</a></p>
                    </div>
                </div>

                <!-- SIGN UP FORM -->
                <div id="signup-form" class="hidden">
                     <div class="form-content">
                        <div class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.8839 12.0002C16.8839 14.6934 14.6932 16.8842 11.9999 16.8842C9.30669 16.8842 7.11597 14.6934 7.11597 12.0002C7.11597 9.30691 9.30669 7.11618 11.9999 7.11618C14.6932 7.11618 16.8839 9.30691 16.8839 12.0002Z" stroke="currentColor" stroke-width="1.5"></path> <path d="M19.3499 7.11618C21.0503 8.3551 22.1158 10.2646 22.1158 12.4211C22.1158 16.223 18.991 19.348 15.1892 19.348C13.2842 19.348 11.5519 18.6631 10.2335 17.5615" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path> <path d="M13.7665 6.43859C12.448 5.33686 10.7158 4.65201 8.81079 4.65201C4.9961 4.65201 1.88391 7.7642 1.88391 11.5789C1.88391 13.7354 2.94951 15.6449 4.65014 16.8838" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></div>
                        <h2 class="auth-title">Sign Up</h2>
                        <p class="subtitle">Create an account to start using the service.</p>
                        <form class="auth-form" id="signup-auth-form">
                            {% csrf_token %}
                            <div class="input-group"><input type="text" id="signup-lastname" required placeholder="Last Name"></div>
                            <div class="input-group"><input type="text" id="signup-firstname" required placeholder="First & Middle Name"></div>
                            <div class="input-group"><input type="email" id="signup-email" required placeholder="Email"></div>
                            <div class="input-group"><input type="tel" id="signup-phone" required placeholder="Phone Number"></div>
                            <div class="input-group"><div class="password-wrapper"><input type="password" id="signup-password" required placeholder="Password"><span class="password-toggle"><i class="fa-regular fa-eye-slash"></i></span></div></div>
                            <div class="input-group"><div class="password-wrapper"><input type="password" id="signup-confirm-password" required placeholder="Confirm Password"><span class="password-toggle"><i class="fa-regular fa-eye-slash"></i></span></div></div>
                            <div class="options"><div class="checkbox-group"><input type="checkbox" id="agree-terms"> I agree to the <a href="#"> Terms </a> &amp; <a href="#"> Policy </a></div></div>
                            <button type="submit" class="btn-submit" id="signup-btn" disabled>Create Account</button>
                        </form>
                        <p class="auth-switch">Already have an account? <a href="#" id="switch-to-login">Login</a></p>
                    </div>
                </div>

                <!-- ================= START: NEW SIGNUP SUCCESS FORM ================= -->
                <div id="signup-success-form" class="hidden">
                    <div class="form-content success-message">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2 class="auth-title">Registration Successful</h2>
                        <p class="subtitle">Your account has been created. We are redirecting you to login...</p>
                    </div>
                </div>
                <!-- ================= END: NEW SIGNUP SUCCESS FORM ================= -->


                <!-- FORGOT PASSWORD FORM -->
                <div id="forgot-password-form" class="hidden">
                    <div class="form-content">
                        <div class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.8839 12.0002C16.8839 14.6934 14.6932 16.8842 11.9999 16.8842C9.30669 16.8842 7.11597 14.6934 7.11597 12.0002C7.11597 9.30691 9.30669 7.11618 11.9999 7.11618C14.6932 7.11618 16.8839 9.30691 16.8839 12.0002Z" stroke="currentColor" stroke-width="1.5"></path> <path d="M19.3499 7.11618C21.0503 8.3551 22.1158 10.2646 22.1158 12.4211C22.1158 16.223 18.991 19.348 15.1892 19.348C13.2842 19.348 11.5519 18.6631 10.2335 17.5615" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path> <path d="M13.7665 6.43859C12.448 5.33686 10.7158 4.65201 8.81079 4.65201C4.9961 4.65201 1.88391 7.7642 1.88391 11.5789C1.88391 13.7354 2.94951 15.6449 4.65014 16.8838" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></div>
                        <a href="#" class="back-link" data-form="login"><i class="fas fa-chevron-left"></i> Back to login</a>
                        <h2 class="auth-title">Forgot Password?</h2>
                        <p class="subtitle">No worries, enter your email and phone number to reset your password.</p>
                        <form class="auth-form" id="forgot-auth-form">
                            <div class="input-group"><input type="email" id="forgot-email" required placeholder="Email"></div>
                            <div class="input-group"><input type="tel" id="forgot-phone" required placeholder="Phone Number (10 digits)" pattern="[0-9]{10}" maxlength="10" title="Please enter exactly 10 digits."></div>
                            <button type="submit" class="btn-submit" id="forgot-btn" disabled>Reset Password </button>
                        </form>
                    </div>
                </div>

                <!-- NEW: SET PASSWORD FORM -->
                <div id="set-password-form" class="hidden">
                    <div class="form-content">
                        <div class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.8839 12.0002C16.8839 14.6934 14.6932 16.8842 11.9999 16.8842C9.30669 16.8842 7.11597 14.6934 7.11597 12.0002C7.11597 9.30691 9.30669 7.11618 11.9999 7.11618C14.6932 7.11618 16.8839 9.30691 16.8839 12.0002Z" stroke="currentColor" stroke-width="1.5"></path> <path d="M19.3499 7.11618C21.0503 8.3551 22.1158 10.2646 22.1158 12.4211C22.1158 16.223 18.991 19.348 15.1892 19.348C13.2842 19.348 11.5519 18.6631 10.2335 17.5615" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path> <path d="M13.7665 6.43859C12.448 5.33686 10.7158 4.65201 8.81079 4.65201C4.9961 4.65201 1.88391 7.7642 1.88391 11.5789C1.88391 13.7354 2.94951 15.6449 4.65014 16.8838" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg></div>
                        <a href="#" class="back-link" data-form="forgot"><i class="fas fa-chevron-left"></i> Go Back</a>
                        <h2 class="auth-title">Set a New Password</h2>
                        <p class="subtitle">Please set a new password for your account.</p>
                        <form class="auth-form" id="set-password-auth-form">
                            <div class="input-group">
                                <div class="password-wrapper">
                                    <input type="password" id="new-password" required placeholder="New password (at least 6 characters)">
                                    <span class="password-toggle"><i class="fa-regular fa-eye-slash"></i></span>
                                </div>
                            </div>
                            <div class="input-group">
                                <div class="password-wrapper">
                                    <input type="password" id="confirm-new-password" required placeholder="Confirm new password">
                                    <span class="password-toggle"><i class="fa-regular fa-eye-slash"></i></span>
                                </div>
                                <p class="password-mismatch-error">Passwords do not match. Please try again.</p>
                            </div>
                            <button type="submit" class="btn-submit" id="set-password-btn" disabled>Save Password</button>
                        </form>
                    </div>
                </div>

                <!-- NEW: RESET SUCCESS MESSAGE -->
                <div id="reset-success-form" class="hidden">
                    <div class="form-content success-message">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2 class="auth-title">Password Reset Successful</h2>
                        <p class="subtitle" style="margin-bottom: 30px;">Your password has been updated successfully.</p>
                        <button type="button" class="btn-submit" id="back-to-login-btn">Back to Login</button>
                    </div>
                </div>

            </div>
            <!-- Illustration Panel (Right) -->
            <div class="auth-illustration-panel">
                <img src="{% static 'images/Homepage.png'%}" alt="Authentication Illustration" id="auth-image">
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- POPUP CONTROLS (Giữ nguyên) ---
        const authOverlay = document.getElementById('auth-overlay');
        const showLoginBtn = document.getElementById('show-login-btn');
        const showSignupBtn = document.getElementById('show-signup-btn');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const setPasswordForm = document.getElementById('set-password-form');
        const resetSuccessForm = document.getElementById('reset-success-form');
        const signupSuccessForm = document.getElementById('signup-success-form');
        const allForms = [loginForm, signupForm, forgotPasswordForm, setPasswordForm, resetSuccessForm, signupSuccessForm];
        const switchToSignupLink = document.getElementById('switch-to-signup');
        const switchToLoginLink = document.getElementById('switch-to-login');
        const showForgotPasswordLink = document.getElementById('show-forgot-password-link');
        const authImage = document.getElementById('auth-image');
        const loginIllustration = STATIC_PATHS.login; 
        const signupIllustration = STATIC_PATHS.signup;
        const forgotIllustration = STATIC_PATHS.forgot;
        const setPasswordIllustration = STATIC_PATHS.setPassword;
        const successIllustration = STATIC_PATHS.success;

        function showPopup(formToShow, imageToShow) {
            if (imageToShow && authImage) {
                authImage.src = imageToShow;
            }
            allForms.forEach(form => form.classList.add('hidden'));
            formToShow.classList.remove('hidden');
            authOverlay.classList.add('active');
        }

        showLoginBtn.addEventListener('click', () => showPopup(loginForm, loginIllustration));
        showSignupBtn.addEventListener('click', () => showPopup(signupForm, signupIllustration));
        switchToSignupLink.addEventListener('click', (e) => { e.preventDefault(); showPopup(signupForm, signupIllustration); });
        switchToLoginLink.addEventListener('click', (e) => { e.preventDefault(); showPopup(loginForm, loginIllustration); });
        showForgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); showPopup(forgotPasswordForm, forgotIllustration); });

        document.querySelectorAll('.back-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetForm = link.dataset.form;
                if (targetForm === 'login') {
                    showPopup(loginForm, loginIllustration);
                } else if (targetForm === 'forgot') {
                    showPopup(forgotPasswordForm, forgotIllustration);
                }
            });
        });

        authOverlay.addEventListener('click', (e) => {
            if (e.target === authOverlay) authOverlay.classList.remove('active');
        });

        // --- FORM FUNCTIONALITY (Giữ nguyên) ---
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', () => {
                const passwordInput = toggle.parentElement.querySelector('input');
                const icon = toggle.querySelector('i');
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye-slash'); icon.classList.add('fa-eye');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye'); icon.classList.add('fa-eye-slash');
                }
            });
        });

        // --- Hàm helper để lấy CSRF token (Giữ nguyên) ---
        function getCsrfToken() {
            const tokenInput = document.querySelector('input[name="csrfmiddlewaretoken"]');
            return tokenInput ? tokenInput.value : '';
        }

        // ===========================================
        // ===== LOGIN FORM SUBMISSION (Giữ nguyên) =====
        // ===========================================
        const loginAuthForm = document.getElementById('login-auth-form');
        const loginEmail = document.getElementById('login-email');
        const loginPassword = document.getElementById('login-password');
        const loginBtn = document.getElementById('login-btn');

        function validateLoginForm() { 
            loginBtn.disabled = !(loginEmail.value.trim() !== '' && loginPassword.value.trim() !== '');
        }
        [loginEmail, loginPassword].forEach(el => el.addEventListener('input', validateLoginForm));

        loginAuthForm.addEventListener('submit', function(e) {
            e.preventDefault();
            if (loginBtn.disabled) return;
            const data = { email: loginEmail.value, password: loginPassword.value };
            fetch('/api/login/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    window.location.href = result.redirect_url;
                } else {
                    alert('Lỗi: ' + result.error);
                }
            })
            .catch(err => {
                console.error('Fetch error:', err);
                alert('Có lỗi máy chủ xảy ra. Vui lòng thử lại.');
            });
        });

        // =============================================
        // ===== SIGNUP FORM SUBMISSION (Giữ nguyên) =====
        // =============================================
        const signupAuthForm = document.getElementById('signup-auth-form');
        const signupLastname = document.getElementById('signup-lastname');
        // ... (các const khác của signup) ...
        const signupFirstname = document.getElementById('signup-firstname');
        const signupEmail = document.getElementById('signup-email');
        const signupPhone = document.getElementById('signup-phone');
        const signupPassword = document.getElementById('signup-password');
        const signupConfirmPassword = document.getElementById('signup-confirm-password');
        const agreeTerms = document.getElementById('agree-terms');
        const signupBtn = document.getElementById('signup-btn');
        const signupInputs = [signupLastname, signupFirstname, signupEmail, signupPhone, signupPassword, signupConfirmPassword, agreeTerms];
        
        function validateSignupForm() {
            const doPasswordsMatch = signupPassword.value === signupConfirmPassword.value && signupPassword.value.trim() !== '';
            signupBtn.disabled = !(signupLastname.value.trim() !== '' && signupFirstname.value.trim() !== '' && signupEmail.value.trim() !== '' && signupEmail.checkValidity() && signupPhone.value.trim() !== '' && signupPassword.value.trim().length >= 6 && doPasswordsMatch && agreeTerms.checked);
        }
        signupInputs.forEach(el => { el.addEventListener(el.type === 'checkbox' ? 'change' : 'input', validateSignupForm); });

        signupAuthForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (signupBtn.disabled) return;
            const data = {
                last_name: signupLastname.value,
                first_name: signupFirstname.value,
                email: signupEmail.value,
                phone: signupPhone.value,
                password: signupPassword.value
            };
            fetch('/api/register/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    showPopup(signupSuccessForm, successIllustration);
                    setTimeout(() => {
                        showPopup(loginForm, loginIllustration);
                        loginEmail.value = data.email;
                    }, 2500);
                } else {
                    alert('Lỗi: ' + result.error);
                }
            })
            .catch(err => {
                console.error('Fetch error:', err);
                alert('Có lỗi máy chủ xảy ra. Vui lòng thử lại.');
            });
        });

        // ======================================================
        // ===== FORGOT PASSWORD FLOW (SỬA LẠI VỚI FETCH) =====
        // ======================================================
        const forgotAuthForm = document.getElementById('forgot-auth-form');
        const forgotEmail = document.getElementById('forgot-email');
        const forgotPhone = document.getElementById('forgot-phone');
        const forgotBtn = document.getElementById('forgot-btn');
        
        function validateForgotForm() {
            forgotBtn.disabled = !( forgotEmail.value.trim() !== '' && forgotEmail.checkValidity() && forgotPhone.value.trim() !== '' && forgotPhone.checkValidity() );
        }
        [forgotEmail, forgotPhone].forEach(el => el.addEventListener('input', validateForgotForm));
        
        forgotAuthForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (forgotBtn.disabled) return;

            const data = {
                email: forgotEmail.value,
                phone: forgotPhone.value
            };
            
            // Gọi API để xác minh
            fetch('/api/forgot-verify/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    // Xác minh thành công, chuyển sang form đặt mật khẩu mới
                    showPopup(setPasswordForm, setPasswordIllustration);
                } else {
                    alert('Lỗi: ' + result.error);
                }
            })
            .catch(err => {
                console.error('Fetch error:', err);
                alert('Có lỗi máy chủ xảy ra.');
            });
        });

        // ========================================================
        // ===== SET NEW PASSWORD FLOW (SỬA LẠI VỚI FETCH) =====
        // ========================================================
        const setPasswordAuthForm = document.getElementById('set-password-auth-form');
        const newPassword = document.getElementById('new-password');
        const confirmNewPassword = document.getElementById('confirm-new-password');
        const setPasswordBtn = document.getElementById('set-password-btn');
        const passwordMismatchError = document.querySelector('.password-mismatch-error');
        
        function validateSetPasswordForm() {
            const pass1 = newPassword.value;
            const pass2 = confirmNewPassword.value;
            if (pass2.length > 0 && pass1 !== pass2) {
                passwordMismatchError.style.display = 'block';
            } else {
                passwordMismatchError.style.display = 'none';
            }
            setPasswordBtn.disabled = !(pass1.length >= 6 && pass1 === pass2);
        }
        [newPassword, confirmNewPassword].forEach(el => el.addEventListener('input', validateSetPasswordForm));
        
        setPasswordAuthForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (setPasswordBtn.disabled) return;

            const data = {
                new_password: newPassword.value
            };

            // Gọi API để cập nhật mật khẩu
            fetch('/api/set-password/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCsrfToken() },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    // Cập nhật thành công
                    showPopup(resetSuccessForm, successIllustration);
                } else {
                    alert('Lỗi: ' + result.error);
                }
            })
            .catch(err => {
                console.error('Fetch error:', err);
                alert('Có lỗi máy chủ xảy ra.');
            });
        });

        // (Code nút "Back to Login" giữ nguyên)
        const backToLoginBtn = document.getElementById('back-to-login-btn');
        backToLoginBtn.addEventListener('click', () => {
            showPopup(loginForm, loginIllustration);
        });

    });
    </script>
</body>
</html>